{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.domReady\"","webpack:///external \"wp.url\"","webpack:///external \"wp.element\"","webpack:///external \"wp.data\"","webpack:///./assets/js/course/_blockController/general/index.js","webpack:///./assets/js/course/_blockController/topic/index.js","webpack:///./assets/js/course/_blockController/quiz/index.js","webpack:///./assets/js/course/_blockController/index.js","webpack:///./assets/js/course/dashboard/index.js","webpack:///./assets/js/course/outline/index.js","webpack:///./assets/js/data-store/actions.js","webpack:///./assets/js/data-store/controls.js","webpack:///./assets/js/data-store/selectors.js","webpack:///./assets/js/data-store/reducer.js","webpack:///./assets/js/data-store/resolvers.js","webpack:///./assets/js/course/index.js","webpack:///./assets/js/data-store/index.js","webpack:///external \"wp.apiFetch\"","webpack:///external \"ReactDOM\"","webpack:///external \"regeneratorRuntime\""],"names":["module","exports","React","wp","domReady","url","element","data","General","children","user","window","userData","MarkComplete","uuid","userId","courseId","isComplete","useState","status","setStatus","setComplete","useDispatch","Button","size","color","onClick","console","log","apiFetch","path","method","completed","then","res","setTimeout","loading","disabled","Topic","parentTitle","title","className","hasQuiz","useSelect","select","isActive","getActive","getCourseId","Toolbar","id","Menu","style","fontSize","Item","Header","as","dividing","Subheader","data-uuid","QuizComponent","useDidMount","quiz","onComplete","obj","blockController","fn","Children","map","child","isValidElement","props","cloneElement","blockData","outline","flat","filter","block","length","undefined","includes","qProps","quizzes","Dashboard","active","getData","getCompleted","total","topics","ratio","progress","progressRatio","files","getFiles","quizData","getQuizzes","name","CourseProgress","Progress","percent","autoSuccess","Files","info","f","forEach","file","push","href","download","Quizzes","q","hasOwnProperty","quizTitle","setActive","Icon","Lessons","loaded","structured","lessons","Outline","vertical","fluid","actions","fetchFromAPI","type","initDataFromAPI","history","location","protocol","pathname","host","pushState","newurl","controls","FETCH_FROM_API","action","selectors","state","index","findIndex","DEFAULT_STATE","reducer","resolvers","Course","registerStore","reactElms","ReactHtmlParser","expectedUUID","getQueryArg","Segment","minHeight","Grid","stackable","divided","Row","Column","width","document","querySelector","querySelectorAll","value","parseInt","getAttribute","innerHTML","render","other","ReactDOM","regeneratorRuntime"],"mappings":"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","file":"app/course-0982474d.js","sourcesContent":["module.exports = React;","module.exports = wp.domReady;","module.exports = wp.url;","module.exports = wp.element;","module.exports = wp.data;","import { Fragment } from '@wordpress/element';\n\nconst General = ({ children }) => {\n    return <Fragment>{children}</Fragment>;\n};\n\nexport default General;\n","import { useSelect, useDispatch } from '@wordpress/data';\nimport { Fragment, useState } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button, Header, Menu } from 'semantic-ui-react';\n\nconst user = window.userData;\n\nconst MarkComplete = ({ uuid, userId, courseId, isComplete }) => {\n    const [status, setStatus] = useState(false);\n    const { setComplete } = useDispatch('easyteachlms/course');\n    return (\n        <Button\n            size=\"small\"\n            color={isComplete ? 'green' : null}\n            onClick={() => {\n                setStatus(true);\n                console.log('COURSE ID');\n                console.log(courseId);\n                console.log(userId);\n\n                apiFetch({\n                    path: `/easyteachlms/v3/student/update-progress/?userId=${userId}&uuid=${uuid}&courseId=${courseId}`,\n                    method: 'POST',\n                    data: { completed: true },\n                }).then((res) => {\n                    console.log(res);\n                    setTimeout(() => {\n                        setStatus(false);\n                        setComplete(uuid);\n                    }, 1000);\n                });\n            }}\n            loading={status}\n            disabled={isComplete}\n        >\n            Mark Completed\n        </Button>\n    );\n};\n\nconst Topic = ({ parentTitle, title, uuid, hasQuiz, className, children }) => {\n    const { isComplete, isActive, courseId } = useSelect((select) => {\n        const complete = select('easyteachlms/course').isComplete(uuid);\n        const active = select('easyteachlms/course').getActive();\n        return {\n            isComplete: complete,\n            isActive: active === uuid,\n            courseId: select('easyteachlms/course').getCourseId(),\n        };\n    }, []);\n\n    if (true !== isActive) {\n        return <Fragment />;\n    }\n\n    const Toolbar = () => {\n        const { id } = user;\n        return (\n            <Menu style={{ fontSize: '14px' }}>\n                <Menu.Item>\n                    <MarkComplete\n                        uuid={uuid}\n                        userId={id}\n                        courseId={courseId}\n                        isComplete={isComplete}\n                    />\n                </Menu.Item>\n\n                <Menu.Item>Get Help</Menu.Item>\n            </Menu>\n        );\n    };\n    // How can we tell if this has a quiz??\n    return (\n        <Fragment>\n            <Header as=\"h2\" dividing>\n                {title}\n                {false !== parentTitle && (\n                    <Header.Subheader>{parentTitle}</Header.Subheader>\n                )}\n            </Header>\n            <div className={className} data-uuid={uuid}>\n                {children}\n                <Toolbar />\n            </div>\n        </Fragment>\n    );\n};\n\nexport default Topic;\n","import { useDidMount } from '@daniakash/lifecycle-hooks';\nimport Quiz from 'react-quiz-component';\nimport apiFetch from '@wordpress/api-fetch';\nimport QuizResults from './results';\n\nconst QuizComponent = ({ id, title, uuid, data }) => {\n    useDidMount(() => {\n        console.log('QUIZ');\n        console.log(data);\n    });\n\n    const onCompleteAction = (obj) => {\n        // This makes most sense to send the data sep from the results page.\n        console.log(obj);\n        // YOUR LOGIC GOES HERE\n    };\n\n    return (\n        <div>\n            <Quiz quiz={data} onComplete={onCompleteAction} />\n        </div>\n    );\n};\n\nexport default QuizComponent;\n","import {\n    Fragment,\n    RawHTML,\n    Children,\n    isValidElement,\n    cloneElement,\n} from '@wordpress/element';\n\n// Load Our Blocks\nimport General from './general';\nimport Topic from './topic';\nimport Quiz from './quiz';\n\n// Maps Course post_content to EasyTeach LMS block handlers.\nconst blockController = (children, data, style, fn) => {\n    // Iterate over static HTML content\n    return Children.map(children, (child) => {\n        // Failover Condition:\n        if (!isValidElement(child)) {\n            return <RawHTML>{child}</RawHTML>;\n        }\n\n        if (child.props.children) {\n            child = cloneElement(child, {\n                children: blockController(child.props.children, data, fn),\n            });\n        }\n\n        const uuid = child.props['data-uuid'];\n        const blockData = data.outline.flat.filter(\n            (block) => block.uuid === uuid,\n        );\n\n        let parentTitle = false;\n        let hasQuiz = false;\n        if (blockData.length) {\n            parentTitle = blockData[0].parentTitle;\n            hasQuiz = blockData[0].hasQuiz;\n        }\n\n        // Class Name is so important for us we need to double check it. All of our logic is based on class names.\n        const { className } = child.props;\n        if (undefined === className) {\n            return child;\n        }\n\n        if (className.includes('wp-block-easyteachlms-topic')) {\n            return (\n                <Topic\n                    title={child.props['data-title']}\n                    className={child.props.className}\n                    uuid={uuid}\n                    parentTitle={parentTitle}\n                    hasQuiz={hasQuiz}\n                >\n                    {child}\n                </Topic>\n            );\n        }\n\n        if (className.includes('wp-block-easyteachlms-quiz')) {\n            const qProps = child.props;\n            qProps.uuid = uuid;\n            qProps.data = data.quizzes[uuid];\n            return <Quiz {...qProps} />;\n        }\n\n        if (className.includes('wp-block-embed-youtube')) {\n            return (\n                <div>\n                    <Fragment>\n                        {child}\n                        <hr />\n                    </Fragment>\n                </div>\n            );\n        }\n\n        // Default to raw output if no conditions met.\n        return <General>{child}</General>;\n    });\n};\n\nexport default blockController;\n","import { useSelect } from '@wordpress/data';\nimport { Fragment } from '@wordpress/element';\nimport { Progress, Icon } from 'semantic-ui-react';\n\nconst user = window.userData;\n\nconst Dashboard = ({ id }) => {\n    const { isActive, progress, progressRatio, files, quizData } = useSelect(\n        (select) => {\n            const active = select('easyteachlms/course').getActive();\n            const data = select('easyteachlms/course').getData(id);\n            const completed = select('easyteachlms/course').getCompleted();\n            const total = data.topics;\n            const ratio = `${completed}/${total}`;\n            console.log('<Dashboard>');\n            console.log(data);\n            return {\n                data,\n                isActive: 'dashboard' === active,\n                progress: 100 * (completed / total),\n                progressRatio: ratio,\n                files: select('easyteachlms/course').getFiles(),\n                quizData: select('easyteachlms/course').getQuizzes(),\n            };\n        },\n        [],\n    );\n    if (true !== isActive) {\n        return <Fragment />;\n    }\n\n    const { name } = user;\n\n    const CourseProgress = () => {\n        return (\n            <Progress\n                percent={progress}\n                color=\"teal\"\n                size=\"small\"\n                active\n                autoSuccess\n            >\n                {100 === progress\n                    ? 'Course Completed!'\n                    : `Course Progress ${progressRatio}`}\n            </Progress>\n        );\n    };\n\n    const Files = () => {\n        console.info('<Files/>');\n        const f = [];\n        files.forEach((file) => {\n            f.push(\n                <li>\n                    <a href={file.href} download>\n                        {file.title}\n                    </a>\n                </li>,\n            );\n        });\n\n        return (\n            <Fragment>\n                <h3>Files</h3>\n                <p>\n                    <i>Click to download files</i>\n                </p>\n                <ul>{f}</ul>\n            </Fragment>\n        );\n    };\n\n    const Quizzes = () => {\n        console.info('<Quizzes/>');\n        const q = [];\n\n        // eslint-disable-next-line no-restricted-syntax\n        for (const quiz in quizData) {\n            if (quizData.hasOwnProperty(quiz)) {\n                q.push(\n                    <li>\n                        <a>{quizData[quiz].quizTitle}</a>\n                    </li>,\n                );\n            }\n        }\n\n        return (\n            <Fragment>\n                <h3>Quizzes</h3>\n                <ul>{q}</ul>\n            </Fragment>\n        );\n    };\n\n    return (\n        <div>\n            <h2>Hi, {name}</h2>\n            <CourseProgress />\n            <p>Course Description Here...</p>\n            <Quizzes />\n            <Files />\n        </div>\n    );\n};\n\nexport default Dashboard;\n","/* eslint-disable no-shadow */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport { useDispatch, useSelect, select } from '@wordpress/data';\nimport { Icon, Menu } from 'semantic-ui-react';\n\n// const getBlockByUUID = (data, uuid) => {\n//     return data.filter((obj) => {\n//         return obj.uuid === uuid;\n//     });\n// };\n\n// const getBlockIndexByUUID = (data, uuid) => {\n//     return data.findIndex((obj) => obj.uuid === uuid);\n// };\n\nconst Item = ({ title, uuid }) => {\n    const { setActive } = useDispatch('easyteachlms/course');\n    const { isComplete, isActive } = useSelect((select) => {\n        const complete = select('easyteachlms/course').isComplete(uuid);\n        const active = select('easyteachlms/course').getActive();\n        return {\n            isComplete: complete,\n            isActive: active === uuid,\n        };\n    }, []);\n\n    return (\n        <Menu.Item onClick={() => setActive(uuid)} active={isActive}>\n            {true === isComplete && <Icon name=\"check circle\" />}\n            {title}\n        </Menu.Item>\n    );\n};\n\nconst Lessons = ({ id }) => {\n    const { data, loaded } = useSelect((select) => {\n        const data = select('easyteachlms/course').getData(id);\n        let loaded = false;\n        if (false !== data) {\n            loaded = true;\n        }\n        return {\n            data,\n            loaded,\n        };\n    }, []);\n\n    if (true !== loaded) {\n        return;\n    }\n\n    const { outline } = data;\n    const { structured } = outline;\n\n    const lessons = [];\n    for (const uuid in structured) {\n        // Lesson\n        const { title, outline } = structured[uuid];\n        const topics = [];\n        for (const uuid in outline) {\n            // Topic\n            const { title } = outline[uuid];\n\n            topics.push(<Item title={title} uuid={uuid} />);\n        }\n        lessons.push(\n            <Menu.Item>\n                <Menu.Header>{title}</Menu.Header>\n                <Menu.Menu>{topics}</Menu.Menu>\n            </Menu.Item>,\n        );\n    }\n\n    return lessons;\n};\n\nconst Outline = ({ id }) => {\n    const { setActive } = useDispatch('easyteachlms/course');\n    return (\n        <Menu vertical fluid>\n            <Menu.Item\n                onClick={() => {\n                    setActive('dashboard');\n                }}\n            >\n                Course Dashboard\n            </Menu.Item>\n            <Lessons id={id} />\n        </Menu>\n    );\n};\n\nexport default Outline;\n","const actions = {\n    fetchFromAPI(courseId) {\n        return {\n            type: 'FETCH_FROM_API',\n            courseId,\n        };\n    },\n    initDataFromAPI(data) {\n        return {\n            type: 'INIT_DATA',\n            data,\n        };\n    },\n    setActive(uuid) {\n        const { history, location } = window;\n        const { protocol, pathname, host } = location;\n        if (history.pushState) {\n            const newurl = `${protocol}//${host}${pathname}?uuid=${uuid}`;\n            history.pushState({ path: newurl }, '', newurl);\n        }\n        return {\n            type: 'SET_ACTIVE',\n            uuid,\n        };\n    },\n    setComplete(uuid) {\n        return {\n            type: 'SET_COMPLETE',\n            uuid,\n        };\n    },\n};\n\nexport default actions;\n","import apiFetch from '@wordpress/api-fetch';\n\nconst controls = {\n    FETCH_FROM_API(action) {\n        const userId = window.userData.id;\n        console.log('FETCH_FROM_API');\n        console.log(userId);\n        return apiFetch({\n            path: `/easyteachlms/v3/course/get/?courseId=${action.courseId}&userId=${userId}`,\n        });\n    },\n};\n\nexport default controls;\n","const selectors = {\n    getCourseId(state) {\n        const { id } = state.data;\n        return id;\n    },\n    getActive(state) {\n        const { active } = state;\n        return active;\n    },\n    getData(state, courseId) {\n        console.log('selector::');\n        console.log(`getData(${courseId})`);\n        return state.data;\n    },\n    getQuizzes(state) {\n        if (!state.data.hasOwnProperty('quizzes')) {\n            return false;\n        }\n        return state.data.quizzes;\n    },\n    getFiles(state) {\n        if (!state.data.hasOwnProperty('files')) {\n            return false;\n        }\n        return state.data.files;\n    },\n    getCompleted(state) {\n        if (\n            !state.data.hasOwnProperty('outline') ||\n            !state.data.outline.hasOwnProperty('completed')\n        ) {\n            return false;\n        }\n        const { completed } = state.data.outline;\n        return completed;\n    },\n    isComplete(state, uuid) {\n        if (\n            !state.data.hasOwnProperty('outline') ||\n            !state.data.outline.hasOwnProperty('flat')\n        ) {\n            return false;\n        }\n        const { flat } = state.data.outline;\n        const index = flat.findIndex((obj) => obj.uuid === uuid);\n        return flat[index].completed;\n    },\n};\n\nexport default selectors;\n","/* eslint-disable default-case */\nconst DEFAULT_STATE = {\n    active: false,\n    completed: 0,\n    data: false,\n};\n\nconst reducer = (state = DEFAULT_STATE, action) => {\n    switch (action.type) {\n        case 'INIT_DATA':\n            return {\n                ...state,\n                data: action.data,\n            };\n        case 'SET_ACTIVE':\n            return {\n                ...state,\n                active: action.uuid,\n            };\n        case 'SET_COMPLETE':\n            // eslint-disable-next-line no-case-declarations\n            const { data } = state;\n            const { outline } = data;\n            const { flat } = outline;\n            const index = flat.findIndex((obj) => obj.uuid === action.uuid);\n            // eslint-disable-next-line no-case-declarations\n\n            data.outline.flat[index].completed = true;\n            data.outline.completed = data.outline.completed + 1;\n            console.log('set_complete');\n            console.log(state);\n            console.log(data);\n            return {\n                ...state,\n                data,\n                completed: state.completed + 1,\n            };\n    }\n    return state;\n};\n\nexport default reducer;\n","import selectors from './selectors';\nimport actions from './actions';\n\nconst resolvers = {\n    *getData(courseId) {\n        console.log('resolvers');\n        console.log(`getData(${courseId})`);\n        const data = yield actions.fetchFromAPI(courseId);\n        console.log(data);\n        return actions.initDataFromAPI(data);\n    },\n};\n\nexport default resolvers;\n","/* eslint-disable no-shadow */\nimport './style.scss';\n\nimport domReady from '@wordpress/dom-ready';\nimport ReactHtmlParser from 'react-html-parser';\n\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { Fragment, render } from '@wordpress/element';\nimport { getQueryArg } from '@wordpress/url';\nimport { useDidMount } from '@daniakash/lifecycle-hooks';\n\nimport { Grid, Segment } from 'semantic-ui-react';\n\nimport blockController from './_blockController';\nimport Dashboard from './dashboard';\nimport Outline from './outline';\n\nimport dataStore from '../data-store';\n\nconst Course = ({ id, children }) => {\n    const reactElms = ReactHtmlParser(children);\n\n    const { setActive } = useDispatch('easyteachlms/course');\n\n    const { data, loaded } = useSelect(\n        (select) => {\n            const data = select('easyteachlms/course').getData(id);\n            console.log(data);\n\n            let loaded = false;\n            if (false !== data) {\n                loaded = true;\n            }\n            return {\n                data,\n                loaded,\n            };\n        },\n        [id],\n    );\n\n    const style = 'default';\n\n    const windowState = () => {\n        const expectedUUID = getQueryArg(window.location.href, 'uuid');\n        if (expectedUUID) {\n            setActive(expectedUUID);\n        } else {\n            setActive('dashboard');\n        }\n    };\n\n    useDidMount(() => {\n        // Get data\n        windowState();\n    });\n\n    return (\n        <Segment loading={!loaded} style={{ minHeight: '100px' }}>\n            {true === loaded && (\n                <Grid stackable divided>\n                    <Grid.Row>\n                        <Grid.Column width={5}>\n                            <Outline id={id} />\n                        </Grid.Column>\n                        <Grid.Column width={11}>\n                            <Fragment>\n                                <Dashboard id={id} />\n                                {blockController(reactElms, data, style)}\n                            </Fragment>\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            )}\n        </Segment>\n    );\n};\n\n/** Initialize from static markup */\ndomReady(() => {\n    // See if we can get other course content\n    if (document.querySelector('.wp-block-easyteachlms-course')) {\n        const other = false;\n        const elms = document.querySelectorAll('.wp-block-easyteachlms-course');\n        elms.forEach((value) => {\n            // eslint-disable-next-line radix\n            const id = parseInt(value.getAttribute('data-course-id'));\n            const children = value.innerHTML;\n            render(\n                <Course id={id} other={other}>\n                    {children}\n                </Course>,\n                value,\n            );\n        });\n    }\n});\n","/* eslint-disable default-case */\nimport { registerStore } from '@wordpress/data';\n\nimport actions from './actions';\nimport controls from './controls';\nimport selectors from './selectors';\nimport reducer from './reducer';\nimport resolvers from './resolvers';\n\nconst store = registerStore('easyteachlms/course', {\n    reducer,\n\n    actions,\n\n    selectors,\n\n    controls,\n\n    resolvers,\n});\n\nexport default store;\n","module.exports = wp.apiFetch;","module.exports = ReactDOM;","module.exports = regeneratorRuntime;"],"sourceRoot":""}