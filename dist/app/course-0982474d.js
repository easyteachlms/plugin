/*!
 * 
 * easyteachlms
 * 
 * @author 
 * @version 3.0.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioeasyTeachLMSappJsonp=window.wpackioeasyTeachLMSappJsonp||[]).push([[0],{0:function(e,t){e.exports=React},139:function(e,t){e.exports=wp.domReady},141:function(e,t){e.exports=wp.url},15:function(e,t){e.exports=wp.element},165:function(e,t,a){a(166),e.exports=a(347)},167:function(e,t,a){},18:function(e,t){e.exports=wp.data},192:function(e,t){},347:function(e,t,a){"use strict";a.r(t);a(167);var n=a(139),c=a.n(n),r=a(140),o=a.n(r),l=a(18),u=a(15),i=a(141),s=a(59),d=a(357),m=a(358),p=function(e){var t=e.children;return React.createElement(u.Fragment,null,t)},f=a(62),h=a(42),E=a.n(h),v=a(354),g=a(355),R=a(356),y=window.userData,O=function(e){var t=e.uuid,a=e.userId,n=e.courseId,c=e.isComplete,r=Object(u.useState)(!1),o=Object(f.a)(r,2),i=o[0],s=o[1],d=Object(l.useDispatch)("easyteachlms/course").setComplete;return React.createElement(v.a,{size:"small",color:c?"green":null,onClick:function(){s(!0),console.log("COURSE ID"),console.log(n),console.log(a),E()({path:"/easyteachlms/v3/student/update-progress/?userId=".concat(a,"&uuid=").concat(t,"&courseId=").concat(n),method:"POST",data:{completed:!0}}).then((function(e){console.log(e),setTimeout((function(){s(!1),d(t)}),1e3)}))},loading:i,disabled:c},"Mark Completed")},b=function(e){var t=e.parentTitle,a=e.title,n=e.uuid,c=(e.hasQuiz,e.className),r=e.children,o=Object(l.useSelect)((function(e){return{isComplete:e("easyteachlms/course").isComplete(n),isActive:e("easyteachlms/course").getActive()===n,courseId:e("easyteachlms/course").getCourseId()}}),[]),i=o.isComplete,s=o.isActive,d=o.courseId;if(!0!==s)return React.createElement(u.Fragment,null);var m=function(){var e=y.id;return React.createElement(g.a,{style:{fontSize:"14px"}},React.createElement(g.a.Item,null,React.createElement(O,{uuid:n,userId:e,courseId:d,isComplete:i})),React.createElement(g.a.Item,null,"Get Help"))};return React.createElement(u.Fragment,null,React.createElement(R.a,{as:"h2",dividing:!0},a,!1!==t&&React.createElement(R.a.Subheader,null,t)),React.createElement("div",{className:c,"data-uuid":n},r,React.createElement(m,null)))},w=a(152),C=a.n(w),I=function(e){e.id,e.title,e.uuid;var t=e.data;Object(s.a)((function(){console.log("QUIZ"),console.log(t)}));return React.createElement("div",null,React.createElement(C.a,{quiz:t,onComplete:function(e){console.log(e)}}))},j=function e(t,a,n,c){return u.Children.map(t,(function(t){if(!Object(u.isValidElement)(t))return React.createElement(u.RawHTML,null,t);t.props.children&&(t=Object(u.cloneElement)(t,{children:e(t.props.children,a,c)}));var n=t.props["data-uuid"],r=a.outline.flat.filter((function(e){return e.uuid===n})),o=!1,l=!1;r.length&&(o=r[0].parentTitle,l=r[0].hasQuiz);var i=t.props.className;if(void 0===i)return t;if(i.includes("wp-block-easyteachlms-topic"))return React.createElement(b,{title:t.props["data-title"],className:t.props.className,uuid:n,parentTitle:o,hasQuiz:l},t);if(i.includes("wp-block-easyteachlms-quiz")){var s=t.props;return s.uuid=n,s.data=a.quizzes[n],React.createElement(I,s)}return i.includes("wp-block-embed-youtube")?React.createElement("div",null,React.createElement(u.Fragment,null,t,React.createElement("hr",null))):React.createElement(p,null,t)}))},A=a(352),D=window.userData,P=function(e){var t=e.id,a=Object(l.useSelect)((function(e){var a=e("easyteachlms/course").getActive(),n=e("easyteachlms/course").getData(t),c=e("easyteachlms/course").getCompleted(),r=n.topics,o="".concat(c,"/").concat(r);return console.log("<Dashboard>"),console.log(n),{data:n,isActive:"dashboard"===a,progress:c/r*100,progressRatio:o,files:e("easyteachlms/course").getFiles(),quizData:e("easyteachlms/course").getQuizzes()}}),[]),n=a.isActive,c=a.progress,r=a.progressRatio,o=a.files,i=a.quizData;if(!0!==n)return React.createElement(u.Fragment,null);var s=D.name,d=function(){return React.createElement(A.a,{percent:c,color:"teal",size:"small",active:!0,autoSuccess:!0},100===c?"Course Completed!":"Course Progress ".concat(r))},m=function(){console.info("<Files/>");var e=[];return o.forEach((function(t){e.push(React.createElement("li",null,React.createElement("a",{href:t.href,download:!0},t.title)))})),React.createElement(u.Fragment,null,React.createElement("h3",null,"Files"),React.createElement("p",null,React.createElement("i",null,"Click to download files")),React.createElement("ul",null,e))},p=function(){console.info("<Quizzes/>");var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(React.createElement("li",null,React.createElement("a",null,i[t].quizTitle)));return React.createElement(u.Fragment,null,React.createElement("h3",null,"Quizzes"),React.createElement("ul",null,e))};return React.createElement("div",null,React.createElement("h2",null,"Hi, ",s),React.createElement(d,null),React.createElement("p",null,"Course Description Here..."),React.createElement(p,null),React.createElement(m,null))},z=a(36),T=function(e){var t=e.title,a=e.uuid,n=Object(l.useDispatch)("easyteachlms/course").setActive,c=Object(l.useSelect)((function(e){return{isComplete:e("easyteachlms/course").isComplete(a),isActive:e("easyteachlms/course").getActive()===a}}),[]),r=c.isComplete,o=c.isActive;return React.createElement(g.a.Item,{onClick:function(){return n(a)},active:o},!0===r&&React.createElement(z.a,{name:"check circle"}),t)},S=function(e){var t=e.id,a=Object(l.useSelect)((function(e){var a=e("easyteachlms/course").getData(t),n=!1;return!1!==a&&(n=!0),{data:a,loaded:n}}),[]),n=a.data;if(!0===a.loaded){var c=n.outline.structured,r=[];for(var o in c){var u=c[o],i=u.title,s=u.outline,d=[];for(var m in s){var p=s[m].title;d.push(React.createElement(T,{title:p,uuid:m}))}r.push(React.createElement(g.a.Item,null,React.createElement(g.a.Header,null,i),React.createElement(g.a.Menu,null,d)))}return r}},F=function(e){var t=e.id,a=Object(l.useDispatch)("easyteachlms/course").setActive;return React.createElement(g.a,{vertical:!0,fluid:!0},React.createElement(g.a.Item,{onClick:function(){a("dashboard")}},"Course Dashboard"),React.createElement(S,{id:t}))},k={fetchFromAPI:function(e){return{type:"FETCH_FROM_API",courseId:e}},initDataFromAPI:function(e){return{type:"INIT_DATA",data:e}},setActive:function(e){var t=window,a=t.history,n=t.location,c=n.protocol,r=n.pathname,o=n.host;if(a.pushState){var l="".concat(c,"//").concat(o).concat(r,"?uuid=").concat(e);a.pushState({path:l},"",l)}return{type:"SET_ACTIVE",uuid:e}},setComplete:function(e){return{type:"SET_COMPLETE",uuid:e}}},x={FETCH_FROM_API:function(e){var t=window.userData.id;return console.log("FETCH_FROM_API"),console.log(t),E()({path:"/easyteachlms/v3/course/get/?courseId=".concat(e.courseId,"&userId=").concat(t)})}},_={getCourseId:function(e){return e.data.id},getActive:function(e){return e.active},getData:function(e,t){return console.log("selector::"),console.log("getData(".concat(t,")")),e.data},getQuizzes:function(e){return!!e.data.hasOwnProperty("quizzes")&&e.data.quizzes},getFiles:function(e){return!!e.data.hasOwnProperty("files")&&e.data.files},getCompleted:function(e){return!(!e.data.hasOwnProperty("outline")||!e.data.outline.hasOwnProperty("completed"))&&e.data.outline.completed},isComplete:function(e,t){if(!e.data.hasOwnProperty("outline")||!e.data.outline.hasOwnProperty("flat"))return!1;var a=e.data.outline.flat,n=a.findIndex((function(e){return e.uuid===t}));return a[n].completed}},M=a(19);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q={active:!1,completed:0,data:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_DATA":return H(H({},e),{},{data:t.data});case"SET_ACTIVE":return H(H({},e),{},{active:t.uuid});case"SET_COMPLETE":var a=e.data,n=a.outline,c=n.flat,r=c.findIndex((function(e){return e.uuid===t.uuid}));return a.outline.flat[r].completed=!0,a.outline.completed=a.outline.completed+1,console.log("set_complete"),console.log(e),console.log(a),H(H({},e),{},{data:a,completed:e.completed+1})}return e},L=a(92),V=a.n(L),J={getData:V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("resolvers"),console.log("getData(".concat(t,")")),e.next=4,k.fetchFromAPI(t);case 4:return a=e.sent,console.log(a),e.abrupt("return",k.initDataFromAPI(a));case 7:case"end":return e.stop()}}),e)}))},U=(Object(l.registerStore)("easyteachlms/course",{reducer:N,actions:k,selectors:_,controls:x,resolvers:J}),function(e){var t=e.id,a=e.children,n=o()(a),c=Object(l.useDispatch)("easyteachlms/course").setActive,r=Object(l.useSelect)((function(e){var a=e("easyteachlms/course").getData(t);console.log(a);var n=!1;return!1!==a&&(n=!0),{data:a,loaded:n}}),[t]),p=r.data,f=r.loaded;return Object(s.a)((function(){var e;e=Object(i.getQueryArg)(window.location.href,"uuid"),c(e||"dashboard")})),React.createElement(d.a,{loading:!f,style:{minHeight:"100px"}},!0===f&&React.createElement(m.a,{stackable:!0,divided:!0},React.createElement(m.a.Row,null,React.createElement(m.a.Column,{width:5},React.createElement(F,{id:t})),React.createElement(m.a.Column,{width:11},React.createElement(u.Fragment,null,React.createElement(P,{id:t}),j(n,p,"default"))))))});c()((function(){if(document.querySelector(".wp-block-easyteachlms-course")){document.querySelectorAll(".wp-block-easyteachlms-course").forEach((function(e){var t=parseInt(e.getAttribute("data-course-id")),a=e.innerHTML;Object(u.render)(React.createElement(U,{id:t,other:!1},a),e)}))}}))},42:function(e,t){e.exports=wp.apiFetch},44:function(e,t){e.exports=ReactDOM},92:function(e,t){e.exports=regeneratorRuntime}},[[165,1,2]]]);
//# sourceMappingURL=course-0982474d.js.map