{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.domReady\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.url\"","webpack:///external \"wp.element\"","webpack:///external \"wp.data\"","webpack:///./assets/js/course/topic/index.js","webpack:///./assets/js/course/quiz/index.js","webpack:///./assets/js/course/blockController.js","webpack:///./assets/js/course/outline/index.js","webpack:///./assets/js/course/store.js","webpack:///./assets/js/course/index.js","webpack:///external \"ReactDOM\"","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\""],"names":["module","exports","React","wp","domReady","apiFetch","url","element","data","Topic","withSelect","select","active","getActive","parentTitle","title","uuid","className","hasQuiz","children","MarkComplete","Button","size","color","Toolbar","Menu","style","fontSize","Item","Header","as","dividing","Subheader","data-uuid","QuizComponent","id","useDidMount","console","log","quiz","blockController","fn","Children","map","child","isValidElement","props","cloneElement","blockData","outline","flat","filter","block","length","undefined","includes","qProps","quizzes","Outline","setActive","useDispatch","useSelect","Lessons","lessons","structured","topics","isActive","push","onClick","vertical","fluid","DEFAULT_STATE","actions","window","history","pushState","newurl","location","protocol","host","pathname","path","type","selectors","state","getUserState","userData","registerStore","reducer","action","controls","resolvers","Course","withState","loaded","setState","reactElms","ReactHtmlParser","then","d","expectedUUID","getQueryArg","href","sethTestData","Grid","divided","Row","Column","width","document","querySelector","querySelectorAll","forEach","value","parseInt","getAttribute","innerHTML","render","ReactDOM","regeneratorRuntime","lodash"],"mappings":"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","file":"app/course-672af27a.js","sourcesContent":["module.exports = React;","module.exports = wp.domReady;","module.exports = wp.apiFetch;","module.exports = wp.url;","module.exports = wp.element;","module.exports = wp.data;","import { useDidMount } from '@daniakash/lifecycle-hooks';\nimport { withSelect } from '@wordpress/data';\nimport { Fragment } from '@wordpress/element';\nimport { Button, Header, Menu } from 'semantic-ui-react';\n\nconst Topic = withSelect((select) => {\n    return {\n        active: select('easyteachlms/course').getActive(),\n    };\n})(({ parentTitle, title, active, uuid, hasQuiz, className, children }) => {\n    if (uuid !== active) {\n        return <Fragment />;\n    }\n    const MarkComplete = () => {\n        return (\n            <Button size=\"small\" color=\"green\">\n                Mark Completed\n            </Button>\n        );\n    };\n\n    const Toolbar = () => {\n        return (\n            <Menu style={{ fontSize: '14px' }}>\n                <Menu.Item>\n                    <MarkComplete />\n                </Menu.Item>\n\n                <Menu.Item>Get Help</Menu.Item>\n            </Menu>\n        );\n    };\n    // How can we tell if this has a quiz??\n    return (\n        <Fragment>\n            <Header as=\"h2\" dividing>\n                {title}\n                {false !== parentTitle && (\n                    <Header.Subheader>{parentTitle}</Header.Subheader>\n                )}\n            </Header>\n            <div className={className} data-uuid={uuid}>\n                {children}\n                <Toolbar />\n            </div>\n        </Fragment>\n    );\n});\n\nexport default Topic;\n","import { useDidMount } from '@daniakash/lifecycle-hooks';\nimport Quiz from 'react-quiz-component';\n\nconst QuizComponent = ({ id, title, uuid, data }) => {\n    useDidMount(() => {\n        console.log('QUIZ');\n        console.log(data);\n    });\n    return (\n        <div>\n            <Quiz quiz={data} />\n        </div>\n    );\n};\n\nexport default QuizComponent;\n","import {\n    Fragment,\n    RawHTML,\n    Children,\n    isValidElement,\n    cloneElement,\n} from '@wordpress/element';\n\n// Load Our Block Renderers\n// import Lesson from './lesson';\nimport Topic from './topic';\nimport Quiz from './quiz';\n\nconst getBlockByUUID = (data, uuid) => {\n    return data.filter(function (obj) {\n        return obj.uuid === uuid;\n    });\n};\n\n// Maps Course post_content to EasyTeach LMS block handlers.\nconst blockController = (children, data, style, fn) => {\n    return Children.map(children, (child) => {\n        // Failover Condition:\n        if (!isValidElement(child)) {\n            return <RawHTML>{child}</RawHTML>;\n        }\n\n        if (child.props.children) {\n            child = cloneElement(child, {\n                children: blockController(child.props.children, data, fn),\n            });\n        }\n\n        const uuid = child.props['data-uuid'];\n        const blockData = data.outline.flat.filter(\n            (block) => block.uuid === uuid,\n        );\n\n        let parentTitle = false;\n        let hasQuiz = false;\n        if (blockData.length) {\n            parentTitle = blockData[0].parentTitle;\n            hasQuiz = blockData[0].hasQuiz;\n        }\n\n        // Class Name is so important for us we need to double check it. All of our logic is based on class names.\n        const { className } = child.props;\n        if (undefined === className) {\n            return child;\n        }\n\n        // determine if has quiz by going through data.outline.flat ... find by uuid and if obj.hasQuiz\n\n        if (className.includes('wp-block-easyteachlms-topic')) {\n            return (\n                <Topic\n                    title={child.props['data-title']}\n                    className={child.props.className}\n                    uuid={uuid}\n                    parentTitle={parentTitle}\n                    hasQuiz={hasQuiz}\n                >\n                    {child}\n                </Topic>\n            );\n        }\n\n        if (className.includes('wp-block-easyteachlms-quiz')) {\n            const qProps = child.props;\n            qProps.data = data.quizzes[child.props.id];\n            qProps.uuid = uuid;\n            return <Quiz {...qProps} />;\n        }\n\n        if (className.includes('wp-block-embed-youtube')) {\n            return (\n                <div>\n                    <Fragment>\n                        <p>\n                            <strong>VIDEO HERE</strong>\n                        </p>\n                        {child}\n                        <hr />\n                    </Fragment>\n                </div>\n            );\n        }\n\n        // Default to raw output if no conditions met.\n        return <Fragment>{child}</Fragment>;\n    });\n};\n\nexport default blockController;\n","import { useDispatch, useSelect } from '@wordpress/data';\nimport { Menu } from 'semantic-ui-react';\n\nconst Outline = ({ data }) => {\n    const { setActive } = useDispatch('easyteachlms/course');\n    const active = useSelect(\n        (select) => select('easyteachlms/course').getActive(),\n        [],\n    );\n\n    const Lessons = () => {\n        const lessons = [];\n        for (const uuid in data.structured) {\n            const { title, outline } = data.structured[uuid];\n            const topics = [];\n            for (const uuid in outline) {\n                const { title } = outline[uuid];\n                const isActive = active === uuid;\n                topics.push(\n                    <Menu.Item\n                        onClick={() => setActive(uuid)}\n                        active={isActive}\n                    >\n                        {title}\n                    </Menu.Item>,\n                );\n            }\n            lessons.push(\n                <Menu.Item>\n                    <Menu.Header>{title}</Menu.Header>\n                    <Menu.Menu>{topics}</Menu.Menu>\n                </Menu.Item>,\n            );\n        }\n        return lessons;\n    };\n\n    return (\n        <Menu vertical fluid>\n            <Menu.Item\n                onClick={() => {\n                    console.log('go to dashboard');\n                }}\n            >\n                Course Dashboard\n            </Menu.Item>\n            <Lessons />\n        </Menu>\n    );\n};\n\nexport default Outline;\n","import { registerStore } from '@wordpress/data';\n\nconst DEFAULT_STATE = {\n    active: false,\n    data: false,\n};\n\nconst actions = {\n    setActive(uuid) {\n        const { history } = window;\n        if (history.pushState) {\n            const newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?uuid=${uuid}`;\n            window.history.pushState({ path: newurl }, '', newurl);\n        }\n        return {\n            type: 'SET_ACTIVE',\n            uuid,\n        };\n    },\n};\n\nconst selectors = {\n    getActive(state) {\n        // If propert exists in state.\n        const { active } = state;\n        return active;\n    },\n    getUserState(state) {\n        const { userData } = state;\n        return userData;\n    },\n};\n\nregisterStore('easyteachlms/course', {\n    reducer(state = DEFAULT_STATE, action) {\n        switch (action.type) {\n            case 'SET_ACTIVE':\n                return {\n                    ...state,\n                    active: action.uuid,\n                };\n        }\n        return state;\n    },\n\n    actions,\n\n    selectors,\n\n    controls: {},\n\n    resolvers: {\n        *getActive() {\n            const active = yield selectors.getActive();\n            return active;\n        },\n    },\n});\n","import './style.scss';\n\nimport { withState } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { render, Fragment } from '@wordpress/element';\nimport domReady from '@wordpress/dom-ready';\nimport ReactHtmlParser from 'react-html-parser';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useDidMount } from '@daniakash/lifecycle-hooks';\nimport { getQueryArg } from '@wordpress/url';\nimport { Grid } from 'semantic-ui-react';\nimport blockController from './blockController';\nimport Outline from './outline';\n\n// Import Course View Data Store\nimport './store';\n\nconst Course = withState({\n    loaded: false,\n    data: false,\n})(({ loaded, data, setState, id, children }) => {\n    const { outline } = data;\n    const reactElms = ReactHtmlParser(children);\n    const { setActive } = useDispatch('easyteachlms/course');\n\n    const style = 'default';\n\n    useDidMount(() => {\n        apiFetch({ path: `/easyteachlms/v3/course/get/?course_id=${id}` }).then(\n            (d) => {\n                console.log('Course Data');\n                console.log(d);\n\n                const expectedUUID = getQueryArg(window.location.href, 'uuid');\n                if (expectedUUID) {\n                    setActive(expectedUUID);\n                }\n                window.sethTestData = d;\n\n                setState({\n                    loaded: true,\n                    data: d,\n                });\n                // After loading data determine which is active and use useDispatch to set accordingly\n            },\n        );\n    });\n\n    return (\n        <Fragment>\n            {true === loaded && (\n                <Grid divided>\n                    <Grid.Row>\n                        <Grid.Column width={5}>\n                            <Outline data={outline} />\n                        </Grid.Column>\n                        <Grid.Column width={11}>\n                            {blockController(reactElms, data, style)}\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            )}\n        </Fragment>\n    );\n});\n\n// Initialize from static markup\ndomReady(() => {\n    if (document.querySelector('.wp-block-easyteachlms-course')) {\n        const elms = document.querySelectorAll('.wp-block-easyteachlms-course');\n        elms.forEach((value) => {\n            const id = parseInt(value.getAttribute('data-course-id'));\n            const children = value.innerHTML;\n            render(<Course id={id}>{children}</Course>, value);\n        });\n    }\n});\n","module.exports = ReactDOM;","module.exports = regeneratorRuntime;","module.exports = lodash;"],"sourceRoot":""}