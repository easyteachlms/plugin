{"version":3,"sources":["webpack:///external \"React\"","webpack:///external \"wp.domReady\"","webpack:///external \"wp.apiFetch\"","webpack:///external \"wp.url\"","webpack:///external \"wp.element\"","webpack:///external \"wp.data\"","webpack:///./assets/js/course/topic/index.js","webpack:///./assets/js/course/quiz/index.js","webpack:///./assets/js/course/blockController.js","webpack:///./assets/js/course/outline/index.js","webpack:///./assets/js/course/store.js","webpack:///./assets/js/course/index.js","webpack:///external \"ReactDOM\"","webpack:///external \"regeneratorRuntime\"","webpack:///external \"lodash\""],"names":["module","exports","React","wp","domReady","apiFetch","url","element","data","Topic","withSelect","select","active","getActive","title","uuid","className","children","data-uuid","Button","size","color","QuizComponent","id","useDidMount","console","log","quiz","blockController","fn","Children","map","child","isValidElement","props","cloneElement","undefined","includes","qProps","quizzes","Outline","setActive","useDispatch","useSelect","Lessons","lessons","structured","outline","topics","push","Menu","Item","onClick","Header","vertical","fluid","DEFAULT_STATE","actions","window","history","pushState","newurl","location","protocol","host","pathname","path","type","selectors","state","registerStore","reducer","action","controls","resolvers","Course","withState","loaded","setState","reactElms","ReactHtmlParser","then","d","expectedUUID","getQueryArg","href","Grid","divided","Row","Column","width","document","querySelector","querySelectorAll","forEach","value","parseInt","getAttribute","innerHTML","render","ReactDOM","regeneratorRuntime","lodash"],"mappings":"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","file":"app/course-08c599a2.js","sourcesContent":["module.exports = React;","module.exports = wp.domReady;","module.exports = wp.apiFetch;","module.exports = wp.url;","module.exports = wp.element;","module.exports = wp.data;","import { useDidMount } from '@daniakash/lifecycle-hooks';\nimport { withSelect } from '@wordpress/data';\nimport { Fragment } from '@wordpress/element';\nimport { Button } from 'semantic-ui-react';\n\nconst Topic = withSelect((select) => {\n    return {\n        active: select('easyteachlms/course').getActive(),\n    };\n})(({ title, active, uuid, className, children }) => {\n    if (uuid !== active) {\n        return <Fragment />;\n    }\n    return (\n        <div className={className} data-uuid={uuid}>\n            {children}\n            <Button size=\"medium\" color=\"green\">\n                Mark Completed\n            </Button>\n        </div>\n    );\n});\n\nexport default Topic;\n","import { useDidMount } from '@daniakash/lifecycle-hooks';\nimport Quiz from 'react-quiz-component';\n\nconst QuizComponent = ({ id, title, uuid, data }) => {\n    useDidMount(() => {\n        console.log('QUIZ');\n        console.log(data);\n    });\n    return (\n        <div>\n            <h4>Quiz Here</h4>\n            <h3>{title}</h3>\n            <Quiz quiz={data} />\n        </div>\n    );\n};\n\nexport default QuizComponent;\n","import {\n    Fragment,\n    RawHTML,\n    Children,\n    isValidElement,\n    cloneElement,\n} from '@wordpress/element';\n\n// Load Our Block Renderers\n// import Lesson from './lesson';\nimport Topic from './topic';\nimport Quiz from './quiz';\n\nconst getBlockByUUID = (data, uuid) => {\n    return data.filter(function (obj) {\n        return obj.uuid === uuid;\n    });\n};\n\n// Maps Course post_content to EasyTeach LMS block handlers.\nconst blockController = (children, data, active, fn) => {\n    return Children.map(children, (child) => {\n        // Failover Condition:\n        if (!isValidElement(child)) {\n            return <RawHTML>{child}</RawHTML>;\n        }\n\n        if (child.props.children) {\n            child = cloneElement(child, {\n                children: blockController(\n                    child.props.children,\n                    data,\n                    active,\n                    fn,\n                ),\n            });\n        }\n\n        const uuid = child.props['data-uuid'];\n\n        // Class Name is so important for us we need to double check it. All of our logic is based on class names.\n        const { className } = child.props;\n        if (undefined === className) {\n            return child;\n        }\n\n        if (className.includes('wp-block-easyteachlms-topic')) {\n            return (\n                <Topic\n                    title={child.props['data-title']}\n                    className={child.props.className}\n                    uuid={uuid}\n                >\n                    {child}\n                </Topic>\n            );\n        }\n\n        if (className.includes('wp-block-easyteachlms-quiz')) {\n            const qProps = child.props;\n            qProps.data = data.quizzes[child.props.id];\n            qProps.uuid = uuid;\n            return <Quiz {...qProps} />;\n        }\n\n        if (className.includes('wp-block-embed-youtube')) {\n            return (\n                <div>\n                    <Fragment>\n                        <p>\n                            <strong>VIDEO HERE</strong>\n                        </p>\n                        {child}\n                        <hr />\n                    </Fragment>\n                </div>\n            );\n        }\n\n        // Default to raw output if no conditions met.\n        return <Fragment>{child}</Fragment>;\n    });\n};\n\nexport default blockController;\n","import { useDispatch, useSelect } from '@wordpress/data';\nimport { Menu } from 'semantic-ui-react';\n\nconst Outline = ({ data }) => {\n    const { setActive } = useDispatch('easyteachlms/course');\n    const active = useSelect(\n        (select) => select('easyteachlms/course').getActive(),\n        [],\n    );\n\n    const Lessons = () => {\n        const lessons = [];\n        for (const uuid in data.structured) {\n            const { title, outline } = data.structured[uuid];\n            const topics = [];\n            for (const uuid in outline) {\n                const { title } = outline[uuid];\n                topics.push(\n                    <Menu.Item\n                        onClick={() => setActive(uuid)}\n                        active={active === uuid}\n                    >\n                        {title}\n                    </Menu.Item>,\n                );\n            }\n            lessons.push(\n                <Menu.Item>\n                    <Menu.Header>{title}</Menu.Header>\n                    <Menu.Menu>{topics}</Menu.Menu>\n                </Menu.Item>,\n            );\n        }\n        return lessons;\n    };\n\n    return (\n        <Menu vertical fluid>\n            <Menu.Item\n                onClick={() => {\n                    console.log('go to dashboard');\n                }}\n            >\n                Course Dashboard\n            </Menu.Item>\n            <Lessons />\n        </Menu>\n    );\n};\n\nexport default Outline;\n","import { registerStore } from '@wordpress/data';\n\nconst DEFAULT_STATE = {\n    active: false,\n    data: false,\n};\n\nconst actions = {\n    setActive(uuid) {\n        const { history } = window;\n        if (history.pushState) {\n            const newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?uuid=${uuid}`;\n            window.history.pushState({ path: newurl }, '', newurl);\n        }\n        return {\n            type: 'SET_ACTIVE',\n            uuid,\n        };\n    },\n};\n\nconst selectors = {\n    getActive(state) {\n        // If propert exists in state.\n        const { active } = state;\n        return active;\n    },\n};\n\nregisterStore('easyteachlms/course', {\n    reducer(state = DEFAULT_STATE, action) {\n        switch (action.type) {\n            case 'SET_ACTIVE':\n                return {\n                    ...state,\n                    active: action.uuid,\n                };\n        }\n        return state;\n    },\n\n    actions,\n\n    selectors,\n\n    controls: {},\n\n    resolvers: {\n        *getActive() {\n            const active = yield selectors.getActive();\n            return active;\n        },\n    },\n});\n","import { withState } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { render, Fragment } from '@wordpress/element';\nimport domReady from '@wordpress/dom-ready';\nimport ReactHtmlParser from 'react-html-parser';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useDidMount } from '@daniakash/lifecycle-hooks';\nimport { getQueryArg } from '@wordpress/url';\nimport { Grid } from 'semantic-ui-react';\nimport blockController from './blockController';\nimport Outline from './outline';\n\n// Import Course View Data Store\nimport './store';\n\nconst Course = withState({\n    loaded: false,\n    data: false,\n})(({ loaded, data, active, setState, id, children }) => {\n    const { outline } = data;\n    const reactElms = ReactHtmlParser(children);\n    const { setActive } = useDispatch('easyteachlms/course');\n\n    useDidMount(() => {\n        apiFetch({ path: `/easyteachlms/v3/course/get/?course_id=${id}` }).then(\n            (d) => {\n                console.log('Course Data');\n                console.log(d);\n\n                const expectedUUID = getQueryArg(window.location.href, 'uuid');\n                if (expectedUUID) {\n                    setActive(expectedUUID);\n                }\n\n                setState({\n                    loaded: true,\n                    data: d,\n                });\n                // After loading data determine which is active and use useDispatch to set accordingly\n            },\n        );\n    });\n\n    return (\n        <Fragment>\n            {true === loaded && (\n                <Grid divided>\n                    <Grid.Row>\n                        <Grid.Column width={5}>\n                            <Outline data={outline} />\n                        </Grid.Column>\n                        <Grid.Column width={11}>\n                            {blockController(reactElms, data, active)}\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            )}\n        </Fragment>\n    );\n});\n\n// Initialize from static markup\ndomReady(() => {\n    if (document.querySelector('.wp-block-easyteachlms-course')) {\n        const elms = document.querySelectorAll('.wp-block-easyteachlms-course');\n        elms.forEach((value) => {\n            const id = parseInt(value.getAttribute('data-course-id'));\n            const children = value.innerHTML;\n            render(<Course id={id}>{children}</Course>, value);\n        });\n    }\n});\n","module.exports = ReactDOM;","module.exports = regeneratorRuntime;","module.exports = lodash;"],"sourceRoot":""}