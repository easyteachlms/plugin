/*!
 * 
 * easyteachlms
 * 
 * @author 
 * @version 3.0.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioeasyTeachLMSappJsonp=window.wpackioeasyTeachLMSappJsonp||[]).push([[0],{0:function(e,t){e.exports=React},139:function(e,t){e.exports=wp.domReady},141:function(e,t){e.exports=wp.url},15:function(e,t){e.exports=wp.element},165:function(e,t,a){a(166),e.exports=a(347)},167:function(e,t,a){},18:function(e,t){e.exports=wp.data},192:function(e,t){},347:function(e,t,a){"use strict";a.r(t);a(167);var c=a(139),n=a.n(c),r=a(140),l=a.n(r),o=a(18),u=a(15),i=a(141),s=a(58),d=a(357),m=a(358),p=function(e){var t=e.children;return React.createElement(u.Fragment,null,t)},f=a(62),h=a(59),E=a.n(h),v=a(354),R=a(355),g=a(356),b=function(e){var t=e.uuid,a=e.userId,c=e.courseId,n=e.isComplete,r=Object(u.useState)(!1),l=Object(f.a)(r,2),i=l[0],s=l[1],d=Object(o.useDispatch)("easyteachlms/course").setComplete;return React.createElement(v.a,{size:"small",color:n?"green":null,onClick:function(){s(!0),console.log("COURSE ID"),console.log(c),console.log(a),E()({path:"/easyteachlms/v3/student/update-progress/?userId=".concat(a,"&uuid=").concat(t,"&courseId=").concat(c),method:"POST",data:{completed:!0}}).then((function(e){console.log(e),setTimeout((function(){s(!1),d(t)}),1e3)}))},loading:i,disabled:n},"Mark Completed")},y=function(e){var t=e.parentTitle,a=e.title,c=e.uuid,n=(e.hasQuiz,e.className),r=e.children,l=Object(o.useSelect)((function(e){return{isComplete:e("easyteachlms/course").isComplete(c),isActive:e("easyteachlms/course").getActive()===c,courseId:e("easyteachlms/course").getCourseId()}}),[]),i=l.isComplete,s=l.isActive,d=l.courseId;if(!0!==s)return React.createElement(u.Fragment,null);var m=function(){return React.createElement(R.a,{style:{fontSize:"14px"}},React.createElement(R.a.Item,null,React.createElement(b,{uuid:c,userId:"1",courseId:d,isComplete:i})),React.createElement(R.a.Item,null,"Get Help"))};return React.createElement(u.Fragment,null,React.createElement(g.a,{as:"h2",dividing:!0},a,!1!==t&&React.createElement(g.a.Subheader,null,t)),React.createElement("div",{className:n,"data-uuid":c},r,React.createElement(m,null)))},O=a(152),I=a.n(O),w=function(e){e.id,e.title,e.uuid;var t=e.data;return Object(s.a)((function(){console.log("QUIZ"),console.log(t)})),React.createElement("div",null,React.createElement(I.a,{quiz:t}))},C=function e(t,a,c,n){return u.Children.map(t,(function(t){if(!Object(u.isValidElement)(t))return React.createElement(u.RawHTML,null,t);t.props.children&&(t=Object(u.cloneElement)(t,{children:e(t.props.children,a,n)}));var c=t.props["data-uuid"],r=a.outline.flat.filter((function(e){return e.uuid===c})),l=!1,o=!1;r.length&&(l=r[0].parentTitle,o=r[0].hasQuiz);var i=t.props.className;if(void 0===i)return t;if(i.includes("wp-block-easyteachlms-topic"))return React.createElement(y,{title:t.props["data-title"],className:t.props.className,uuid:c,parentTitle:l,hasQuiz:o},t);if(i.includes("wp-block-easyteachlms-quiz")){var s=t.props;return s.uuid=c,s.data=a.quizzes[c],React.createElement(w,s)}return i.includes("wp-block-embed-youtube")?React.createElement("div",null,React.createElement(u.Fragment,null,React.createElement("p",null,React.createElement("strong",null,"VIDEO PLAYER STUFF HERE")),t,React.createElement("hr",null))):React.createElement(p,null,t)}))},j=a(352),A=function(e){var t=e.id,a=Object(o.useSelect)((function(e){var a=e("easyteachlms/course").getActive(),c=e("easyteachlms/course").getData(t),n=e("easyteachlms/course").getCompleted();return console.log("<Dashboard>"),console.log(c),console.log(n),{data:c,isActive:"dashboard"===a,progress:n/c.topics*100,files:e("easyteachlms/course").getFiles()}}),[]),c=a.isActive,n=a.progress,r=a.files;if(!0!==c)return React.createElement(u.Fragment,null);var l=function(){console.info("<Files/>");var e=[];return r.forEach((function(t){e.push(React.createElement("li",null,React.createElement("a",{href:t.href,download:!0},t.title)))})),React.createElement(u.Fragment,null,React.createElement("h3",null,"Files"),React.createElement("p",null,React.createElement("i",null,"Click to download files")),React.createElement("ul",null,e))};return React.createElement("div",null,React.createElement("h2",null,"Hi, Seth Rubenstein"),React.createElement(j.a,{percent:n,color:"teal",size:"small",active:!0,autoSuccess:!0},"Course Progress"),React.createElement("p",null,"Course Description Here..."),React.createElement(l,null))},S=a(36),D=function(e){var t=e.title,a=e.uuid,c=Object(o.useDispatch)("easyteachlms/course").setActive,n=Object(o.useSelect)((function(e){return{isComplete:e("easyteachlms/course").isComplete(a),isActive:e("easyteachlms/course").getActive()===a}}),[]),r=n.isComplete,l=n.isActive;return React.createElement(R.a.Item,{onClick:function(){return c(a)},active:l},!0===r&&React.createElement(S.a,{name:"check circle"}),t)},T=function(e){var t=e.id,a=Object(o.useSelect)((function(e){var a=e("easyteachlms/course").getData(t),c=!1;return!1!==a&&(c=!0),{data:a,loaded:c}}),[]),c=a.data;if(!0===a.loaded){var n=c.outline.structured,r=[];for(var l in n){var u=n[l],i=u.title,s=u.outline,d=[];for(var m in s){var p=s[m].title;d.push(React.createElement(D,{title:p,uuid:m}))}r.push(React.createElement(R.a.Item,null,React.createElement(R.a.Header,null,i),React.createElement(R.a.Menu,null,d)))}return r}},F=function(e){var t=e.id,a=Object(o.useDispatch)("easyteachlms/course").setActive;return React.createElement(R.a,{vertical:!0,fluid:!0},React.createElement(R.a.Item,{onClick:function(){a("dashboard")}},"Course Dashboard"),React.createElement(T,{id:t}))},P={fetchFromAPI:function(e,t){return{type:"FETCH_FROM_API",courseId:e,userId:t}},initDataFromAPI:function(e){return{type:"INIT_DATA",data:e}},setActive:function(e){var t=window,a=t.history,c=t.location,n=c.protocol,r=c.pathname,l=c.host;if(a.pushState){var o="".concat(n,"//").concat(l).concat(r,"?uuid=").concat(e);a.pushState({path:o},"",o)}return{type:"SET_ACTIVE",uuid:e}},setComplete:function(e){return{type:"SET_COMPLETE",uuid:e}}},k={FETCH_FROM_API:function(e){return E()({path:"/easyteachlms/v3/course/get/?courseId=".concat(e.courseId,"&userId=").concat(e.userId)})}},x={getCourseId:function(e){return e.data.id},getActive:function(e){return e.active},getData:function(e,t){return console.log("selector::"),console.log("getData(".concat(t,")")),e.data},getFiles:function(e){return!!e.data.hasOwnProperty("files")&&e.data.files},getCompleted:function(e){return e.completed},isComplete:function(e,t){if(!e.data.hasOwnProperty("outline")||!e.data.outline.hasOwnProperty("flat"))return!1;var a=e.data.outline.flat,c=a.findIndex((function(e){return e.uuid===t}));return a[c].completed}},M=a(19);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={active:!1,completed:0,data:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_DATA":return H(H({},e),{},{data:t.data});case"SET_ACTIVE":return H(H({},e),{},{active:t.uuid});case"SET_COMPLETE":var a=e.data,c=a.outline,n=c.flat,r=n.findIndex((function(e){return e.uuid===t.uuid}));return a.outline.flat[r].completed=!0,H(H({},e),{},{data:a,completed:e.completed+1})}return e},N=a(92),q=a.n(N),Q={getData:q.a.mark((function e(t){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("resolvers"),console.log("getData(".concat(t,")")),e.next=4,P.fetchFromAPI(t,1);case 4:return a=e.sent,console.log(a),e.abrupt("return",P.initDataFromAPI(a));case 7:case"end":return e.stop()}}),e)}))},V=(Object(o.registerStore)("easyteachlms/course",{reducer:L,actions:P,selectors:x,controls:k,resolvers:Q}),function(e){var t=e.id,a=e.children,c=l()(a),n=Object(o.useDispatch)("easyteachlms/course").setActive,r=Object(o.useSelect)((function(e){var a=e("easyteachlms/course").getData(t);console.log(a);var c=!1;return!1!==a&&(c=!0),{data:a,loaded:c}}),[t]),p=r.data,f=r.loaded;return Object(s.a)((function(){var e;e=Object(i.getQueryArg)(window.location.href,"uuid"),n(e||"dashboard")})),React.createElement(d.a,{loading:!f,style:{minHeight:"100px"}},!0===f&&React.createElement(m.a,{stackable:!0,divided:!0},React.createElement(m.a.Row,null,React.createElement(m.a.Column,{width:5},React.createElement(F,{id:t})),React.createElement(m.a.Column,{width:11},React.createElement(u.Fragment,null,React.createElement(A,{id:t}),C(c,p,"default"))))))});n()((function(){if(document.querySelector(".wp-block-easyteachlms-course")){document.querySelectorAll(".wp-block-easyteachlms-course").forEach((function(e){var t=parseInt(e.getAttribute("data-course-id")),a=e.innerHTML;Object(u.render)(React.createElement(V,{id:t,other:!1},a),e)}))}}))},43:function(e,t){e.exports=ReactDOM},59:function(e,t){e.exports=wp.apiFetch},92:function(e,t){e.exports=regeneratorRuntime}},[[165,1,2]]]);
//# sourceMappingURL=course-5e20d6eb.js.map